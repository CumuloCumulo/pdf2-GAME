---
name: game-objects-state-management
description: 管理游戏实体、其属性、状态和可见性规则。适用于定义游戏对象、角色、物品、UI元素或跟踪游戏进度。
---

# Game Objects and State Management

## 何时使用
- 定义游戏实体时
- 跟踪游戏进度时
- 设计游戏状态转换时
- 管理信息可见性时

## 执行步骤

### 1. 定义对象（名词）
识别游戏空间中可见或可操纵的所有事物
- 例子：角色、代币
- 注意：空间本身有时可以是一个对象

### 2. 定义属性（形容词）
将信息附加到对象上

**静态属性**
- 在游戏过程中不改变
- 例子：棋子颜色

**动态属性**
- 在游戏过程中改变
- 例子：当前速度、生命值

### 3. 定义状态
为每个动态属性分配一个当前值
- 例子：当前速度 = 75英里/小时

### 4. 实施状态机（用于复杂行为）

- 映射属性的所有可能状态
- 定义触发状态转换的事件
- 确保转换防止非法移动（例如，"在笼中"不能在没有触发事件的情况下直接转换到"惊恐"）
- 对复杂行为使用嵌套状态（例如，"追逐"包含"寻找"、"跟踪"、"隧道"）

### 5. 确定信息可见性（谁知道什么？）

**公开（Public）**
- 所有玩家都知道
- 例子：棋盘位置

**共享私有（Shared Private）**
- 一些玩家知道
- 例子：队友的手牌

**个人私有（Individual Private）**
- 一个玩家知道
- 例子：玩家的手牌

**仅游戏（Game-Only）**
- 系统知道
- 例子：牌组顺序、地城大师信息

**命运（Fate）**
- 随机/直到生成前未知
- 例子：掷骰子

### 6. 通信规则

- 如果两个对象的行为不同，它们必须看起来不同
- 如果它们的行为相同，它们应该看起来相同

## 变量

- **attribute_type**：静态或动态
- **visibility**：公开、共享私有、私有、仅游戏、命运
- **state_transition**：当前状态 + 事件 → 下一状态

## 输出结果
- 游戏对象的结构化清单，具有定义的属性、状态和可见性规则
- 防止非法移动的状态机设计
- 清晰的信息可见性规则